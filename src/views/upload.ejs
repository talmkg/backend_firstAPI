<!DOCTYPE html>
<html lang="en">
  <header>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
  </header>
  <body class="bg-secondary">
    <div
      class="container bg-dark rounded text-light d-flex justify-content-center align-items-center mt-3 mb-3"
      style="height: 95vh; box-shadow: 10px 5px 5px rgba(183, 0, 255, 0.432)"
    >
      <div class="text-center">
        <h3 class="text-warning mb-4">Upload image</h3>
        <form method="POST" action="/upload" enctype="multipart/form-data">
          <input type="file" name="image" id="image_input" />
          <input type="submit" />
        </form>
        <div
          class="border text-light mt-4 mx-auto d-flex justify-content-center align-items-center"
          id="display_image"
          style="
            max-height: 40vh;
            background-repeat: no-repeat;
            aspect-ratio: 16/9;
          "
        ></div>
      </div>
    </div>

    <script>
      const image_input = document.querySelector("#image_input");
      let uploaded_image = "";
      image_input.addEventListener("change", function () {
        console.log(image_input);
        const reader = new FileReader();
        reader.addEventListener("load", () => {
          uploaded_image = reader.result;
          document.querySelector(
            "#display_image"
          ).style.backgroundImage = `url(${uploaded_image})`;
        });

        reader.readAsDataURL(this.files[0]);
      });
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
